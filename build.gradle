import org.gradle.api.tasks.bundling.Jar

plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.3.61'
    id 'maven-publish'
}

group 'org.turbomates'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
    maven { url 'https://kotlin.bintray.com/ktor' }
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
//    compile "io.ktor:ktor-client-core:$ktor_version"
//    compile "io.ktor:ktor-client-core-jvm:$ktor_version"
//    compile "io.ktor:ktor-client-logging-jvm:$ktor_version"
}


val sourcesJar by tasks.registering(Jar::class) {
    classifier = "sources"
    from(sourceSets.main.get().allSource)
}

publishing {
    publications {
        create<MavenPublication>("corebot") {
            from(components["kotlin"])
        }
    }

    repositories {
        maven {
            name = "myRepo"
            url = uri("file://${buildDir}/repo")
        }
    }
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}